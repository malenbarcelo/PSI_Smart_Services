<%- include('../partials/head') %>
<%- include('../partials/header') %>
<%- include('../partials/userLogged') %>

<div class="mainBody">

    <div class="mainTitle mbm notVisible" id="companyName"><%= userLogged.company %></div>
    <div class="mainTitle mbm notVisible" id="courseId"><%= idCourse %></div>
    <div class="mainTitle mbm" id="course"><%= course %></div>
    <div class="subtitle mbm">Resultados del formulario (último año)</div>

    <!------MAIN FILTERS------>
    <div id="srMainFilters">
        <div class="divInputsRow">            
            <div class="divInput">
                <label class="label">Empresa</label>
                <select class="input il spl" id="filterCompany">
                    <option value=""></option>
                    <% companies.forEach(company => { %>
                        <% if (company.company_name != 'PSI') { %>
                            <option value="<%= company.company %>"><%= company.company %></option>
                        <% } %>
                    <% }) %>                
                </select>            
            </div>
            <div class="divInput">
                <label class="label">Resultado</label>
                <select class="input is spl" id="filterResult">
                    <option value=""></option>
                    <option value=1>Aprobados</option>
                    <option value=0>Desaprobados</option>
                                   
                </select>            
            </div>
            <div class="divInput">
                <label class="label">DNI</label>
                <input type="text" class="input ixxs ipl" id="filterDni">                    
            </div>
            <div class="divInput">
                <label class="label">Nombre y apellido</label>
                <input type="text" class="input im ipl" id="filterName">                    
            </div>
            <div class="divInput">
                <label class="label">Desde</label>
                <input type="date" class="input ixs ipl" id="filterFrom">                    
            </div>
            <div class="divInput">
                <label class="label">Hasta</label>
                <input type="date" class="input ixs ipl" id="filterUntil">                    
            </div>
            
            <div class="divInput">
                <i class="fa-solid fa-filter-circle-xmark unfilterIcon" id="unfilter"></i>
            </div>
        </div>    
    </div>

    <!------ELEMENTS TO PRINT------>
    <div id="studentsResultsDownloads">    
        <div class="studentsResultsDownload">
            <input type="checkbox" id="printCertificates">
            <label>Certificados</label>
        </div>
        
        <div class="studentsResultsDownload">
            <input type="checkbox" id="printCredentials">
            <label>Credenciales</label>
        </div>

        <div class="srDivDownload">
            <i class="fa-solid fa-download" id="srDownload"></i>
            <div class="srInfoDownload">Descargar seleccionados</div>
        </div>

        <!------ERRORS------>
        <div id="srError" class="notVisible">- Debe elegir al menos un documento y un alumno para imprimir</div>
    
    </div>

    

    <!------STUDENTS RESULTS------>
    <div class="divTable" id="studentsResultsTable">

        <div class="tableInfo" id="infoInfo">Cursos asociados</div>
        <div class="tableInfo" id="obsInfo">Observaciones</div>
        <div class="tableInfo" id="imageInfo">Subir foto</div>
        <div class="tableInfo" id="checkInfo">Seleccionar</div>
    
        <table>
            <thead>
                <tr>                    
                    <th class="thCss thl">Empresa</th>
                    <th class="thCss ths">Fecha</th>
                    <th class="thCss ths">DNI</th>
                    <th class="thCss thl">Apellido y Nombre</th>
                    <th class="thCss thl">Email</th>
                    <th class="thCss thxs">Nota</th>
                    <th class="thCss thxs">
                        <i class="fa-solid fa-circle-info icon" id="infoIcon"></i>
                    </th>
                    <th class="thCss thxs">
                        <i class="fa-regular fa-comment-dots icon" id="obsIcon"></i>
                    </th>
                    <th class="thCss thxs notVisible" id="thCamera">
                        <i class="fa-solid fa-camera icon" id="imageIcon"></i>
                    </th>
                    <th class="thCss thxs notVisible" id="checkIcon"><input type="checkbox" class="icon" id="thCheck"></th>
                    
                    
                </tr>
            </thead>
            <tbody id="studentsResultsBody"></tbody>
        </table>
    </div>

</div>

<!----------LOADER---------->
<div class="loader" id="studentsResultsLoader"></div>

<!----------POPUPS---------->
<%- include('../studentsResults/popupsARPP') %>



<script type="module" src="/js/studentsResults/studentsResults.js"></script>