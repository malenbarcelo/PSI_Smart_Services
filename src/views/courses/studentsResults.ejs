<%- include('../partials/head') %>
<%- include('../partials/header') %>
<%- include('../partials/userLogged') %>

<div class="mainBody">

    <div class="mainTitle mbm notVisible" id="companyName"><%= userLogged.company %></div>
    <div class="mainTitle mbm notVisible" id="courseId"><%= idCourse %></div>
    <div class="mainTitle mbm" id="course"><%= course %></div>
    <div class="subtitle mbm">Resultados del formulario (último año)</div>

    <!------MAIN FILTERS------>
    <div id="srMainFilters">
        <div class="divInputsRow">            
            <div class="divInput">
                <label class="label">Empresa</label>
                <select class="input ixl ipl" id="filterCompany">
                    <option value="">Todas las empresas</option>
                    <% companies.forEach(company => { %>
                        <% if (company.company_name != 'PSI') { %>
                            <option value="<%= company.company %>"><%= company.company %></option>
                        <% } %>
                    <% }) %>                
                </select>            
            </div>
            <div class="divInput">
                <label class="label">Resultado</label>
                <select class="input im ipl" id="filterResult">
                    <option value="">Todos los resultados</option>
                    <option value=1>Aprobados</option>
                    <option value=0>Desaprobados</option>
                                   
                </select>            
            </div>
            <div class="divInput">
                <label class="label">Desde</label>
                <input type="date" class="input is ipl" id="filterFrom">                    
            </div>
            <div class="divInput">
                <label class="label">Hasta</label>
                <input type="date" class="input is ipl" id="filterUntil">                    
            </div>
            <div class="divInput">
                <i class="fa-solid fa-filter-circle-xmark unfilterIcon" id="unfilter"></i>
            </div>
        </div>    
    </div>

    <!------ELEMENTS TO PRINT------>
    <div id="studentsResultsDownloads">    
        <div class="studentsResultsDownload">
            <input type="checkbox" id="filterPassed">
            <label>Certificados</label>
        </div>
        
        <div class="studentsResultsDownload">
            <input type="checkbox" id="filterNotPassed">
            <label>Credenciales</label>
        </div>

        <div>
            <i class="fa-solid fa-download"></i>
        </div>
    </div>

    <!------STUDENTS RESULTS------>
    <div class="divTable" id="studentsResultsTable">
    
        <table>
            <thead>
                <tr>                    
                    <th class="thCss thl">Empresa</th>
                    <th class="thCss ths">Fecha</th>
                    <th class="thCss ths">DNI</th>
                    <th class="thCss thl">Apellido y Nombre</th>
                    <th class="thCss thl">Email</th>
                    <th class="thCss thxs">Nota</th>
                    <th class="thCss thxs">
                        <i class="fa-solid fa-circle-info icon" id="vdppIcon"></i>
                    </th>
                    <th class="thCss thxs">
                        <i class="fa-regular fa-comment-dots icon" id="vdppIcon"></i>
                    </th>
                    <th class="thCss thxs notVisible" id="thCamera">
                        <i class="fa-solid fa-camera icon" id="vdppIcon"></i>
                    </th>
                    <th class="thCss thxs notVisible" id="thCheck"><input type="checkbox"></th>
                    
                    
                </tr>
            </thead>
            <tbody id="studentsResultsBody"></tbody>
        </table>
    </div>

</div>

<!----------LOADER---------->
<div class="loader" id="studentsResultsLoader"></div>

<!----------POPUPS---------->
<%- include('../studentsResults/popupsARPP') %>



<script type="module" src="/js/studentsResults/studentsResults.js"></script>